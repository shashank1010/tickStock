(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,n){"use strict";n.r(t);n(77);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),l=(n(82),n(83),n(74)),i=n.n(l),s=n(13),m=n(19),u=n(22),d=n(70),h=n(48),p=n.n(h),E=n(41),g=n.n(E),f={clearStockHistory:function(){return{type:"RESET_HISTORY"}}},b=Object(s.b)(null,f)(function(e){var t=e.clearStockHistory;return r.a.createElement(p.a,{variant:"dark",bg:"dark",expand:"lg",className:"position-sticky sticky-top"},r.a.createElement(p.a.Brand,{as:m.b,to:"/"},"Stock Ticker"),r.a.createElement(g.a,{className:"ml-auto"},r.a.createElement(g.a.Link,{eventKey:"resetStocks",onSelect:function(){t()}},"Reset Stock History"),r.a.createElement(d.Detector,{render:function(e){var t=e.online;return r.a.createElement(g.a.Item,{className:"live-status my-n2 d-flex align-items-center justify-content-center px-3 ml-2 font-weight-bold ".concat(t?"bg-white text-success":"bg-danger text-white")},t?"LIVE":"OFFLINE")}})))}),y=n(20),v=n(35),k=n.n(v),w=n(23),S=n.n(w),O=n(26),j=n(18),N=navigator.language||navigator.userLanguage,L=Intl.NumberFormat(N,{style:"currency",currency:"USD",currencyDisplay:"code",minimumFractionDigits:"2",maximumFractionDigits:"2"}),C=function(e){var t=e.symbol,n=e.stock,a=e.currentTime,c=n.price,o=n.history,l=o.slice(o.length-2),i=Object(O.a)(l,2),s=i[0],u=i[1],d=u?s.price<u.price:null,h={data:o.map(function(e){return e.price}),height:15,limit:25,margin:1},p=Math.floor((a-(u||s).timeStamp)/1e3),E=0===p?"just now":1===p?"1 second ago":"".concat(p," seconds ago");return r.a.createElement("tr",{className:"vert"},r.a.createElement("td",{className:"align-middle"},r.a.createElement(m.b,{to:"/".concat(t)},r.a.createElement("strong",null,t.toUpperCase()))),r.a.createElement("td",{className:"align-middle text-".concat(null===d?"":!1===d?"danger":"success")},L.format(c)),r.a.createElement("td",{className:"align-middle"},E),r.a.createElement("td",{className:"align-middle p-0"},r.a.createElement(j.Sparklines,h,r.a.createElement(j.SparklinesBars,{style:{fill:"#41c3f9",opacity:.3}}),r.a.createElement(j.SparklinesCurve,{color:"#41c3f9",style:{fill:"none"}}),r.a.createElement(j.SparklinesSpots,{size:1,spotColors:{0:"white","-1":"red",1:"green"}}))))},T=C;C.defaultProp={currentTime:Date.now()};var D=function(e){var t=e.variant,n=e.icon,a=e.message,c=e.children;return r.a.createElement(S.a,{variant:t,className:"rounded-bottom text-center border-0 rounded-top-0 loader d-flex align-items-center justify-content-center flex-column"},n&&r.a.createElement("img",{src:"./".concat(n,".svg"),alt:n}),r.a.createElement("div",{className:"mt-3"},a||c))},x=function(e){var t=e.connection;return r.a.createElement(D,{variant:"danger",icon:"error",message:t.message})},R=function(e){var t=e.message;return r.a.createElement(D,{variant:"dark",icon:"loader",message:t})},U=Object(s.b)(function(e){var t=e.stockListReducer,n=t.stockList,a=t.reset,r=e.connectionStateReducer;return{stockList:n,reset:a,connection:Object(y.a)({},r)}})(function(e){var t=e.stockList,n=e.reset,a=e.connection,c=Object.keys(t).sort(),o=Date.now();if(a.hasError)return r.a.createElement(x,{connection:a});if(0===c.length){var l=n?r.a.createElement("span",null,"Stock data has been flushed.",r.a.createElement("br",null),"Fresh data will be loaded soon."):"Fetching Stocks";return r.a.createElement(R,{message:l,connetion:a})}return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"m-0"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10ch"}},"Code"),r.a.createElement("th",{style:{width:"10ch"}},"Price"),r.a.createElement("th",{style:{width:"15ch"}},"Last Updated At"),r.a.createElement("th",null,"History"))),r.a.createElement("tbody",null,c.length>0&&c.map(function(e){return r.a.createElement(T,{key:e,symbol:e,stock:t[e],currentTime:o})}))))}),I=n(75),A=n(36),F=n(37),P=n(39),W=n(38),_=n(40),H=n(31),G=n.n(H),B=function(e){var t=e.symbol;return r.a.createElement(S.a,{variant:"info"},r.a.createElement(S.a.Heading,null,"Something seems to be wrong! We have no history found for ",r.a.createElement("strong",null,t)),r.a.createElement("p",null,"Well, this is embarrassing! Probably you are here too early, or the symbol is invalid.",r.a.createElement("br",null),"Give it some time, if the symbol is valid the it's history will show up here."),r.a.createElement("hr",null),r.a.createElement("p",{className:"mb-0"},"Feel free to navigate ",r.a.createElement(S.a.Link,{as:m.b,to:"/"},"back to the list")," and pick a symbol to view its history"))},K=function(e){function t(){return Object(A.a)(this,t),Object(P.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props,t=e.stockList,n=e.symbol,a=t[n]||null,c=n.toUpperCase(),o=Object.keys(t).filter(function(e){return e!==n});if(null===a)return r.a.createElement(B,{symbol:c});var l=Object(I.a)(a.history).reverse(),i=l.map(function(e){return e.price}),s={data:i,width:100,height:20,limit:40,margin:1};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Ticker Symbol:",r.a.createElement(G.a,{as:"span",className:"d-inline-block ml-1"},r.a.createElement(G.a.Toggle,{as:"strong",variant:"link",id:"stick-list-dropdown"},c),r.a.createElement(G.a.Menu,null,o.map(function(e){return r.a.createElement(G.a.Item,{key:e,as:m.b,to:"/".concat(e)},e.toUpperCase())})))),i.length>1?r.a.createElement("div",{className:"my-3"},r.a.createElement(j.Sparklines,s,r.a.createElement(j.SparklinesCurve,{color:"#41c3f9",style:{fill:"lightslategray"}}),r.a.createElement(j.SparklinesSpots,{size:1,spotColors:{0:"white","-1":"red",1:"green"}}),r.a.createElement(j.SparklinesReferenceLine,{type:"mean"}))):r.a.createElement(S.a,{variant:"info",className:"text-center"},"Graph will be load here when more data is available."),r.a.createElement(k.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"m-0"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5ch"}}),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Difference"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Time"))),r.a.createElement("tbody",null,l.map(function(e,t,n){var a=e.price,c=e.timeStamp,o=new Date(c).toLocaleString().split(","),i=Object(O.a)(o,2),s=i[0],m=i[1],u=t+1===l.length,d=!u&&l[t+1].price-a,h=u?"-":L.format(Math.abs(d)),p=u?"":d>0?"danger":"success";return r.a.createElement("tr",{key:t},r.a.createElement("td",null,n.length-t),r.a.createElement("td",null,L.format(a)),r.a.createElement("td",{className:p&&"text-".concat(p)},h),r.a.createElement("td",null,s),r.a.createElement("td",null,m))}))))}}]),t}(r.a.Component),z=Object(s.b)(function(e){var t=e.stockListReducer;return{symbol:t.symbol,stockList:t.stockList}})(K),M=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(P.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).hasError=!1,n.message="",n}return Object(_.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/tickStock"})),this.connection=new WebSocket("wss://stocks.mnet.website"),this.connection.onmessage=this.props.updateStocklist,this.connection.onopen=function(t){e.hasError=!1,e.message="",e.updateConnectionStatus(t.type,e.message,e.hasError)},this.connection.onclose=function(t){e.updateConnectionStatus(t.type,e.message,e.hasError)},this.connection.onerror=function(t){e.hasError=!0,e.message="Something went wrong",e.updateConnectionStatus(t.type,e.message,e.hasError)}}},{key:"updateConnectionStatus",value:function(){var e;(e=this.props).updateConnection.apply(e,arguments)}},{key:"render",value:function(){return null}}]),t}(r.a.Component),J={updateStocklist:function(e){return{type:"UPDATE_STOCKLIST",payload:e}},updateConnection:function(){return{type:"UPDATE_CONNECTION",payload:{status:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",message:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",hasError:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}}},V=Object(s.b)(null,J)(M),Y={toggleStock:function(e){return{type:"TOGGLE_STOCK",symbol:e}}},$=Object(s.b)(null,Y)(function(e){var t=e.toggleStock;return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null),r.a.createElement(m.a,null,r.a.createElement(b,null),r.a.createElement(i.a,{className:"py-3 stock-ticker-app"},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:U}),r.a.createElement(u.a,{path:"/:symbol",children:function(e){var n=e.match.params.symbol.toLowerCase();return t(n),r.a.createElement(z,null)}})))))}),q=n(25),Q={stockList:{},symbol:null,reset:!1,connectionState:{status:"",message:"",hasError:!1}};function X(e,t){var n=e.data,a=JSON.parse(n),r=Date.now(),c=t;return a.forEach(function(e){var n=Object(O.a)(e,2),a=n[0],c=+n[1];t[a]?(t[a].price=c,t[a].history.push({price:c,timeStamp:r})):t[a]={price:c,history:[{price:c,timeStamp:r}]}}),c}var Z=Object(q.b)({stockListReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_STOCKLIST":return Object(y.a)({},e,{stockList:X(t.payload,Object(y.a)({},e.stockList)),reset:!1});case"RESET_HISTORY":return Object(y.a)({},e,{stockList:{},reset:!0});case"TOGGLE_STOCK":return Object(y.a)({},e,{symbol:t.symbol});default:return e}},connectionStateReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q.connectionState,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CONNECTION":return Object(y.a)({},e,t.payload);default:return e}}}),ee=Object(q.c)(Z),te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(s.a,{store:ee},r.a.createElement($,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/tickStock",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/tickStock","/service-worker.js");te?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ne(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ne(t,e)})}}()},76:function(e,t,n){e.exports=n(132)},82:function(e,t,n){},83:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.235172cc.chunk.js.map